ElasticSearch 동작 이해하기
=

클러스터의 이점을 살릴 수 있는 적절한 샤드의 수가 핵심이다.

색인 과정 이해하기
-
문서를 분석하고 저장하는 과정을 색인이라고 한다.
색인 과정은 프라이머리에서 일어나며 성능을 많이 잡아먹으므로, 클러스터의 장점을 살려 적절한 수의 샤드를 사용하는 것이 중요하다.

색인 성능에 문제가 있다면 클러스터로서의 이점을 잘 살리고 있는지를 먼저 살펴보아야 한다.

검색 과정 이해하기
-
검색어 분석, inverted index 검색, 검색 결과 표시 순으로 이해할 수 있다.

inverted index는 문자열을 분석한 결과(토큰에 따라 어떤 문서에 값을 가지고 있는지)를 저장하고 있는 구조체이다.

<img width="649" alt="스크린샷 2024-02-10 오후 8 33 08" src="https://github.com/bosungpark/elasticsearch2-markdown-document/assets/81157873/c5a952f7-0af4-4275-ab49-18a17a819990">

inverted index를 만들기 위해서 애널라이저의 분석이 필요하다.

검색요청은 프라이머리, 레플리카 모두 처리가 가능하다.
검색 성능을 높이기 위해서는 number_of_replica를 늘려주면 된다. (레플리카의 조정 없이 노드만 늘리는 것은 의미가 없다.)

text와 keyword 필드의 차이점
-
둘 다 문자열을 나타내기 위한 타입이다.
문자열 필드가 동적 매핑될 때, text와 keyword 두 타입이 생성된다.
문자열에 특성에 따라 정적 매핑을 해 필요한 필드만 생성하는 방법도 있다.

text는 full text search를 위해 토큰을 만들지만, keyword는 exact match를 위해 토큰을 생성한다.

text 예: ['i', 'am', 'a', 'boy']
keyword 예: ['I am a boy']

일반적으로 keyword 타입이 분석에 필요한 과정이 적기 때문에 속도가 빠르다.


