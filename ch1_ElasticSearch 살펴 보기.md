ElasticSearch 살펴 보기
=

소개 
-

앨라스틱 서치란 루씬 기반의 오픈소스 검색 엔진이다.
json기반의 문서를 저장하고 검색하고 분석할 수 있다.

아래와 같은 특징을 가진다.

1. 준 실시간으로 색인된 데이터의 검색 시스템을 지원한다.
refresh-interval의 기본값은 1초로 제법 빠른 검색이 가능하다.

2. 고 가용성을 위한 클러스터를 사용해 안정성과 부하 분산이 가능하다.

3. 동적 스키마의 생성이 가능하다. (NoSQL의 특징)

4. REST 기반의 인터페이스를 제공한다.

클러스터로서의 특징과 노드의 종류
-
컴퓨터 클러스터는 여러 컴퓨터가 연결되어 하나의 시스템 처럼 동작하는 집합을 의미한다. 즉, 어떤 노드에 어떤 요청을 해도 동일한 응답을 반환한다.

앨라스틱도 다수의 노드가 각자의 역할을 바탕으로 하나의 시스템처럼 동작한다. 

클러스터의 성능이 부족하면 스케일 아웃을 통해 대응할 수 있다.
(단, 당연히 모든 경우에 만능은 아니다.)

1. 마스터 노드: 클러스터의 상태 관리 및 메타데이터 관리
2. 데이터 노드: 문서의 인덱스 및 검색 요청 처리
3. 코디네이팅 노드: 검색 요청 처리
4. 인제스트 노트: 인덱싱 된 문서의 데이터 전처리

클러스터이기 때문에 본연의 역할에 적절한 요청을 보내지 않더라도 동작은 하지만 효율을 떨어진다.
로드밸런서를 사용하여 적절한 루트를 찾아가게 하는 것이 중요하다.

인덱스
-

앨라스틱의 구성요소는 RDB와 조금 다르다.
인덱스는 데이터베이스, 매핑은 스키마, 도큐먼트는 로우에 대응한다.

인덱스는 문서가 저장되는 논리적인 공간으로 문서를 저장하기 위해서는 반드시 인덱스가 존재해야한다.

일반적으로는 적은 수의 인덱스를 시작으로 분리해나가는 것을 권장한다.

샤드
-
인덱스에 색인되는 문서가 저장되는 공간, 하나의 인덱스는 하나 이상의 샤드를 가진다. 샤드의 갯수가 변하면 문서가 저장되는 규칙 역시 완전히 변한다. 그래서 프라이머리 샤드의 갯수를 정하는 것은 매우 중요하다.(바꾸기는 것이 불가능, 기본값을 그대로 쓰는 것보다 인덱스 템플릿을 사용하는 것이 권장된다.)

1. 프라이머리 샤드: 문서가 저장되는 원본 샤드, 색인과 검색에 모두 영향을 줌
2. 레플리카 샤드: 검색 성능에 영향을 줌

매핑
-
스키마리스는 아니지만, 미리 정의할 필요는 없는 동적 매핑을 지원.
